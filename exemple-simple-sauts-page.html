<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Exemple Simple - Sauts de Page</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            color: #333;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }

        h2 {
            color: #e74c3c;
            margin-top: 30px;
        }

        .chapitre {
            /* PROPRI√âT√â MODERNE - Fonctionne avec WebEngine, PAS avec WebKit */
            break-before: page;

            /* Fallback ancien - Support limit√© avec WebKit patch√© */
            page-break-before: always;

            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            margin: 20px 0;
        }

        .bloc-important {
            /* NE DOIT PAS √äTRE COUP√â */
            break-inside: avoid;
            page-break-inside: avoid;

            padding: 20px;
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            margin: 30px 0;
            min-height: 300px;
        }

        .resultat {
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-weight: bold;
        }

        .succes {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .echec {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }

        .code {
            background: #f4f4f4;
            padding: 15px;
            border-left: 3px solid #3498db;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
        }

        .attention {
            background: #fff3cd;
            border: 2px dashed #856404;
            padding: 20px;
            margin: 30px 0;
            border-radius: 5px;
        }

        .espace {
            height: 600px;
            background: repeating-linear-gradient(
                0deg,
                #f8f9fa,
                #f8f9fa 20px,
                #e9ecef 20px,
                #e9ecef 40px
            );
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #6c757d;
            margin: 40px 0;
        }
    </style>
</head>
<body>

    <h1>üìö D√©monstration Simple des Sauts de Page CSS</h1>

    <div class="attention">
        <h2 style="margin-top: 0;">üéØ Objectif de ce Test</h2>
        <p><strong>Ce document est con√ßu pour √©chouer avec WebKit et r√©ussir avec WebEngine.</strong></p>
        <p>Observez les diff√©rences :</p>
        <ul>
            <li>Avec <strong>WebKit</strong> : Les chapitres ne commencent PAS sur de nouvelles pages</li>
            <li>Avec <strong>WebEngine</strong> : Chaque chapitre commence sur une NOUVELLE page</li>
        </ul>
        <p><strong>Commandes de test :</strong></p>
        <pre style="background: white; padding: 10px; border-radius: 3px;">
wkhtmltopdf --render-backend webkit exemple-simple-sauts-page.html webkit.pdf
wkhtmltopdf --render-backend webengine exemple-simple-sauts-page.html webengine.pdf</pre>
    </div>

    <div class="espace">
        Espace de remplissage - Page 1
    </div>

    <!-- CHAPITRE 1 - Devrait commencer sur une NOUVELLE page avec WebEngine -->
    <div class="chapitre">
        <h1 style="color: white; border-bottom-color: white;">Chapitre 1 : Introduction</h1>
        <p>Ce chapitre utilise la propri√©t√© CSS <code style="background: rgba(0,0,0,0.2); color: #fff;">break-before: page;</code></p>
        <p><strong>R√©sultat attendu :</strong></p>
    </div>

    <div class="resultat succes">
        ‚úÖ WebEngine : Ce chapitre commence sur une NOUVELLE page
    </div>

    <div class="resultat echec">
        ‚ùå WebKit : Ce chapitre continue sur la page pr√©c√©dente
    </div>

    <div class="code">
        .chapitre {<br>
        &nbsp;&nbsp;/* Propri√©t√© moderne */<br>
        &nbsp;&nbsp;break-before: page;<br>
        <br>
        &nbsp;&nbsp;/* Fallback ancien (ignor√© par WebKit non patch√©) */<br>
        &nbsp;&nbsp;page-break-before: always;<br>
        }
    </div>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

    <div class="espace">
        Espace de remplissage
    </div>

    <!-- CHAPITRE 2 - Devrait √©galement commencer sur une NOUVELLE page -->
    <div class="chapitre">
        <h1 style="color: white; border-bottom-color: white;">Chapitre 2 : Les Propri√©t√©s CSS Modernes</h1>
        <p>Un autre chapitre qui devrait commencer sur une nouvelle page avec WebEngine.</p>
    </div>

    <div class="resultat succes">
        ‚úÖ WebEngine : Nouvelle page forc√©e par CSS
    </div>

    <div class="resultat echec">
        ‚ùå WebKit : Propri√©t√© ignor√©e
    </div>

    <h2>Les Propri√©t√©s Modernes vs Anciennes</h2>

    <table style="width: 100%; border-collapse: collapse; margin: 30px 0;">
        <thead>
            <tr style="background: #2c3e50; color: white;">
                <th style="padding: 12px; border: 1px solid #ddd;">Propri√©t√©</th>
                <th style="padding: 12px; border: 1px solid #ddd;">WebKit</th>
                <th style="padding: 12px; border: 1px solid #ddd;">WebEngine</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="padding: 12px; border: 1px solid #ddd;"><code>break-before: page</code></td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #f8d7da;">‚ùå Non</td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚úÖ Oui</td>
            </tr>
            <tr>
                <td style="padding: 12px; border: 1px solid #ddd;"><code>break-after: page</code></td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #f8d7da;">‚ùå Non</td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚úÖ Oui</td>
            </tr>
            <tr>
                <td style="padding: 12px; border: 1px solid #ddd;"><code>break-inside: avoid</code></td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #fff3cd;">‚ö†Ô∏è Partiel*</td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚úÖ Oui</td>
            </tr>
            <tr>
                <td style="padding: 12px; border: 1px solid #ddd;"><code>page-break-inside: avoid</code></td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚úÖ Oui**</td>
                <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚úÖ Oui</td>
            </tr>
        </tbody>
    </table>

    <p style="font-size: 0.9em; color: #666;">
        * WebKit : Fonctionne uniquement avec Qt patch√© v0.12.1+ pour les blocs non-flottants<br>
        ** WebKit : N√©cessite Qt patch√©, sinon ignor√©
    </p>

    <div class="espace">
        Espace de remplissage
    </div>

    <!-- Test du break-inside: avoid -->
    <div class="bloc-important">
        <h2 style="margin-top: 0;">‚ö†Ô∏è Bloc Important (Ne Doit Pas √ätre Coup√©)</h2>

        <p>Ce bloc utilise <code>break-inside: avoid;</code></p>

        <p><strong>Ce bloc fait 300px de hauteur minimum pour forcer une situation o√π il pourrait √™tre coup√© entre deux pages.</strong></p>

        <div style="margin-top: 40px; padding: 15px; background: white; border: 2px solid #ffc107; border-radius: 5px;">
            <h3>Contenu Prot√©g√©</h3>
            <p>Si vous lisez ce texte enti√®rement sur UNE SEULE page, le test a r√©ussi ! ‚úÖ</p>
            <p>Si ce texte est coup√© en deux (une partie sur une page, le reste sur la suivante), le test a √©chou√©. ‚ùå</p>

            <ul>
                <li>Premier point important</li>
                <li>Deuxi√®me point important</li>
                <li>Troisi√®me point important</li>
                <li>Quatri√®me point important</li>
            </ul>

            <p style="margin-top: 20px; font-weight: bold; color: #856404;">
                Tout ce contenu devrait rester group√© sur la m√™me page.
            </p>
        </div>

        <p style="margin-top: 40px;">
            <strong>R√©sultat attendu :</strong> Avec WebKit patch√© ET WebEngine, ce bloc ne devrait pas √™tre coup√©.
        </p>
    </div>

    <div class="resultat succes">
        ‚úÖ Si le bloc jaune est entier sur une page : TEST R√âUSSI
    </div>

    <div class="resultat echec">
        ‚ùå Si le bloc jaune est coup√© en deux : TEST √âCHOU√â
    </div>

    <div class="espace">
        Espace de remplissage
    </div>

    <!-- CHAPITRE 3 -->
    <div class="chapitre">
        <h1 style="color: white; border-bottom-color: white;">Chapitre 3 : Conclusion</h1>
        <p>Encore un chapitre qui devrait d√©marrer sur une nouvelle page avec WebEngine.</p>
    </div>

    <h2>üìä R√©sum√© des R√©sultats</h2>

    <div style="background: #f8f9fa; padding: 30px; border-radius: 10px; margin: 30px 0;">
        <h3>Comment Interpr√©ter les R√©sultats</h3>

        <div style="margin: 20px 0;">
            <h4 style="color: #28a745;">‚úÖ Avec WebEngine (webengine.pdf)</h4>
            <ul>
                <li>Le document devrait avoir <strong>6-8 pages</strong></li>
                <li>Chaque "Chapitre" (blocs violets) commence sur une <strong>NOUVELLE page</strong></li>
                <li>Le "Bloc Important" (jaune) n'est <strong>PAS coup√©</strong></li>
            </ul>
        </div>

        <div style="margin: 20px 0;">
            <h4 style="color: #dc3545;">‚ùå Avec WebKit (webkit.pdf)</h4>
            <ul>
                <li>Le document devrait avoir <strong>3-5 pages</strong> (moins que WebEngine)</li>
                <li>Les "Chapitres" continuent sur la m√™me page (pas de saut forc√©)</li>
                <li>Le "Bloc Important" peut √™tre coup√© ou non selon la disposition</li>
            </ul>
        </div>
    </div>

    <div class="attention">
        <h3>üí° Conclusion</h3>
        <p><strong>Si vous voulez contr√¥ler pr√©cis√©ment les sauts de page avec CSS moderne :</strong></p>
        <ul>
            <li>‚úÖ Utilisez <code>--render-backend webengine</code></li>
            <li>‚úÖ Utilisez les propri√©t√©s <code>break-before</code>, <code>break-after</code>, <code>break-inside</code></li>
            <li>‚ùå N'utilisez PAS <code>display: flex</code> sur les √©l√©ments avec <code>break-inside</code></li>
        </ul>

        <p style="margin-top: 20px;"><strong>Pour WebKit :</strong></p>
        <ul>
            <li>‚ö†Ô∏è Seul <code>page-break-inside: avoid</code> fonctionne (Qt patch√© requis)</li>
            <li>‚ö†Ô∏è <code>page-break-before/after: always</code> ont un support tr√®s limit√©</li>
            <li>‚ùå Les propri√©t√©s modernes <code>break-*</code> sont compl√®tement ignor√©es</li>
        </ul>
    </div>

    <div style="background: #2c3e50; color: white; padding: 40px; margin-top: 60px; border-radius: 10px; text-align: center; break-before: page; page-break-before: always;">
        <h1 style="color: white; border: none;">üéâ Fin du Test</h1>
        <p style="font-size: 1.2em;">Cette page finale devrait √©galement commencer sur une nouvelle page avec WebEngine.</p>
        <p>Comparez les deux PDFs c√¥te √† c√¥te pour voir les diff√©rences !</p>

        <div style="margin-top: 40px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 5px;">
            <p><strong>Nombre de pages attendu :</strong></p>
            <p style="font-size: 1.5em; margin: 10px 0;">WebKit : ~3-5 pages</p>
            <p style="font-size: 1.5em; margin: 10px 0;">WebEngine : ~6-8 pages</p>
        </div>
    </div>

</body>
</html>
